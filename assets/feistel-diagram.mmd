%%{init: {'theme':'base', 'themeVariables': {'fontSize':'13px', 'fontFamily':'arial', 'primaryColor':'#fff', 'primaryBorderColor':'#999', 'lineColor':'#666', 'padding':'8'}}}%%
flowchart TB
    Input["N bits"]
    
    subgraph s1["Split"]
        L0["L₀"]
        R0["R₀"]
    end
    
    subgraph r1["Round 1"]
        direction LR
        XOR1["⊕"]
        F1["F"]
        L1["L₁"]
        R1["R₁"]
    end
    
    subgraph r2["Round 2"]
        direction LR
        XOR2["⊕"]
        F2["F"]
        L2["L₂"]
        R2["R₂"]
    end
    
    subgraph r3["Round 3"]
        direction LR
        XOR3["⊕"]
        F3["F"]
        L3["L₃"]
        R3["R₃"]
    end
    
    subgraph r4["Round 4"]
        direction LR
        XOR4["⊕"]
        F4["F"]
        L4["L₄"]
        R4["R₄"]
    end
    
    subgraph s2["Swap"]
        L5["L₅"]
        R5["R₅"]
    end
    
    Output["N bits"]
    
    Input --> s1
    
    L0 --> XOR1
    R0 --> F1
    R0 -.-> L1
    F1 --> XOR1
    XOR1 --> R1
    
    L1 --> XOR2
    R1 --> F2
    R1 -.-> L2
    F2 --> XOR2
    XOR2 --> R2
    
    L2 --> XOR3
    R2 --> F3
    R2 -.-> L3
    F3 --> XOR3
    XOR3 --> R3
    
    L3 --> XOR4
    R3 --> F4
    R3 -.-> L4
    F4 --> XOR4
    XOR4 --> R4
    
    L4 --> R5
    R4 --> L5
    
    s2 --> Output
    
    style Input fill:#e1f5ff
    style Output fill:#e1f5ff
    style L0 fill:#ffe1e1
    style R0 fill:#e1ffe1
    style L1 fill:#ffe1e1
    style R1 fill:#e1ffe1
    style L2 fill:#ffe1e1
    style R2 fill:#e1ffe1
    style L3 fill:#ffe1e1
    style R3 fill:#e1ffe1
    style L4 fill:#ffe1e1
    style R4 fill:#e1ffe1
    style L5 fill:#ffe1e1
    style R5 fill:#e1ffe1
    style F1 fill:#fff4e1
    style F2 fill:#fff4e1
    style F3 fill:#fff4e1
    style F4 fill:#fff4e1

